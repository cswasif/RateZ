name = "zk-ratemyprof-api"
main = "src/index.ts"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

# Development settings
[dev]
port = 8787

# D1 Database
[[d1_databases]]
binding = "DB"
database_name = "zk-ratemyprof"
database_id = "your-database-id-here"  # Replace after: wrangler d1 create zk-ratemyprof

# KV Namespace for sessions
[[kv_namespaces]]
binding = "SESSIONS"
id = "dev-sessions"
preview_id = "dev-sessions-preview"

# KV Namespace for nullifiers (anti-spam)
[[kv_namespaces]]
binding = "NULLIFIERS"
id = "dev-nullifiers"
preview_id = "dev-nullifiers-preview"

# Durable Objects for chat
[[durable_objects.bindings]]
name = "CHAT_ROOM"
class_name = "ChatRoom"

[[migrations]]
tag = "v1"
new_classes = ["ChatRoom"]

# Environment variables
[vars]
ENVIRONMENT = "development"

# Production overrides
[env.production]
vars = { ENVIRONMENT = "production" }
